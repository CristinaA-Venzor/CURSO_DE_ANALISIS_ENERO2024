knitr::opts_chunk$set(echo = TRUE)
# Directorio debe ser sustituido por la ubicación del archivo con base en la computadora de cada usuario
# Nombre.xlsx es la base de datos que se va a documentar
delitos<-read_csv("https://raw.githubusercontent.com/CristinaA-Venzor/CURSO_BASE_ANALISIS_CRIMINAL/main/Bases%20de%20datos/carpetas_2023.csv")
# este chucnk no se muestra en el reporte, sólo se ejecutan sus instrucciones
# esto se ve entre corchetes echo = FALSE
## cargo librerías
library(lubridate)
library(janitor)
library(dplyr)
library(magrittr)
library(readr)
# Directorio debe ser sustituido por la ubicación del archivo con base en la computadora de cada usuario
# Nombre.xlsx es la base de datos que se va a documentar
delitos<-read_csv("https://raw.githubusercontent.com/CristinaA-Venzor/CURSO_BASE_ANALISIS_CRIMINAL/main/Bases%20de%20datos/carpetas_2023.csv")
# 1.- limpieza y filtración de datos
# Nos quedamos con sólo un delito:
delitos <- subset(delitos, delito = "AMENAZAS")
# Nos quedamos con las variables que son de nuestro interés para el análisis
conservar <- c("fecha_hechos", "mes_hechos", "hora_hechos", "agencia", "alcaldia_hechos", "municipio_hechos", "latitud", "longitud")
delitos <-  delitos[conservar]
# elimino los repetidos
delitos <- delitos[!duplicated(delitos[ ,c(1:8)]), ]
#tablas de frecuencias por horas y fechas
#pongo en formato fecha
delitos$fecha_hechos <- as.Date(delitos$fecha_hechos, "%d/%m/%y")
#pongo en formato hora
#delitos$`Hora del delito` <- hms(delitos$`Hora del delito`)
#extraigo hora
delitos$hora <- hour(delitos$hora_hechos)
#extraigo día
delitos$dia <- format(delitos$fecha_hechos,"%A")
#extraigo año
delitos$año <- format(delitos$fecha_hechos,"%Y")
#extraigo mes
delitos$mes <- format(delitos$fecha_hechos,"%b")
#extraigo datos meximos, minimos y totales
año <- names(which.max(table(delitos$año)))
max <- sort(delitos$fecha_hechos)[length(delitos$fecha_hechos)-1]
min <-  sort(delitos$fecha_hechos)[1]
total <- dim(delitos)
#limpieza automática de nombre de variables
delitos <- delitos %>% clean_names()
tabla_final<-SmartEDA::ExpData(delitos,type=2)
colnames(tabla_final)<-c("No.","Nombre de variable", "Tipo de datos", "Número de registros", "Valores faltantes", "Porcentaje de valores faltantes", "Número de valores distintos")
tabla_final<-flextable::flextable(tabla_final)
#tabla_final<-width(tabla_final, 1, width = 0.3)
#tabla_final<-width(tabla_final, 2, width = 1)
tabla_final
## Activar librerías
library(tidyverse)
library(janitor)
library(magrittr)
library(readr) # Para importar de distintos formatos con delimitadores
library(tidyverse) # Metapaquete para Manipular datos (magrittr, dplyr, ggplot2, tidyr, purrr)
library(datasets) # Contiene Dataset "iris"
library(ggplot2) #Para graficar
